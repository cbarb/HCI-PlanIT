<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="content_style.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap-grid.min.css">

    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>PlanIT</title>
</head>

<body>
    <!--Vertical Navigation Bar-->
    <div class="nav-bar">
        <ul>
            <img src="images/Group 1.png" alt="PlanitLogo">
            <li>
                <a href="#">
                    <div class="icon">
                        <i class="ion-ios-bell" aria-hidden="true"></i>
                    </div>
                    <div class="name" data-text="Notifications">Notifications</div>
                </a>
            </li>
            <li>
                <a href="#">
                    <div class="icon">
                        <i class="ion-ios-paper" aria-hidden="true"></i>
                    </div>
                    <div class="name" data-text="Planner">Planner</div>
                </a>
            </li>
            <li>
                <a href="#">
                    <div class="icon">
                        <i class="ion-android-calendar" aria-hidden="true"></i>
                    </div>
                    <div class="name" data-text="Calendar">Calendar</div>
                </a>
            </li>
            <li class="activeTab">
                <a href="#">
                    <div class="icon activeIcon">
                        <i class="ion-chatboxes" aria-hidden="true"></i>
                    </div>
                    <div class="name activeName" data-text="Messages">Messages</div>
                </a>
            </li>
            <li>
                <a href="#">
                    <div class="icon">
                        <i class="ion-ios-gear" aria-hidden="true"></i>
                    </div>
                    <div class="name" data-text="Settings">Settings</div>
                </a>
            </li>
        </ul>
    </div>

    <!--Content for message page-->
    <section class="container">
        <h3>Inbox</h3>
        <div class="card">
            <div class="card-header d-flex">
                <h5 class="mr-auto">Messages</h5>
                <div class="dropdown align-self-center mr-3">
                    <button class="btn btn-sm btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Filter
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#">HCI</a>
                        <a class="dropdown-item" href="#">COP</a>
                        <a class="dropdown-item" href="#">Unread</a>
                    </div>
                </div>
                <button type="button" style="background-color:#002350; border-style:none"
                    class="btn btn-sm btn-primary pt-0 pb-0" data-toggle="modal"
                    data-target="#composeMsg">Compose</button>
            </div>
            <ul class="list-group list-group-flush" id="inboxRows">
                <li class="list-group-item list-group-item-action">
                    <div class="d-flex row pr-3">
                        <div class="col-9">
                            <h5 class="font-weight-bold">Vanessa<span class="w3-tag w3-small w3-green ml-3">HCI</span></h5>
                            <p>Hey how is your semester going?</p>
                        </div>
                        <div class="col-3 ml-auto pr-0 text-right">
                            <p class="mb-0">4/5/2019</p>
                            <p class="mb-0">5:47 PM</p>
                            <span class="mt-4 badge badge-primary badge-pill align-self-e">2</span>
                        </div>
                    </div>
                </li>
                <li class="list-group-item list-group-item-action">
                    <div class="d-flex row pr-3">
                        <div class="col-9">
                            <h5 class="font-weight-bold">Rob<span class="w3-tag w3-small w3-purple ml-3">COP 4338</span></h5>
                            <p>When is the homework due?</p>
                            
                        </div>
                        <div class="col-3 ml-auto pr-0 text-right">
                            <p class="mb-0">4/5/2019</p>
                            <p class="mb-0">5:47 PM</p>
                            <span class="mt-4 badge badge-primary badge-pill align-self-e">3</span>
                        </div>
                    </div>
                </li>
                <li class="list-group-item list-group-item-action">
                    <div class="d-flex row pr-3">
                        <div class="col-9">
                            <h5 class="font-weight-bold">Maria</h5>
                            <p>Have a good break!</p>
                        </div>
                        <div class="col-3 ml-auto pr-0 text-right">
                            <p class="mb-0">4/5/2019</p>
                            <p class="mb-0">5:47 PM</p>
                            <span class="mt-4 badge badge-primary badge-pill align-self-e">1</span>
                        </div>
                    </div>
                </li>
            </ul>
        </div>

        <!--To create a new message/chat-->
        <div class="modal fade" id="composeMsg" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Create a new chat</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="messageForm">
                            <div class="form-group">
                                Contact:
                                <input type="text" class="form-control" id="contactName">
                            </div>
                            <div class="form-group">
                                Course:
                                <input type="text" class="form-control" id="courseName">
                            </div>
                            <div class="form-group">
                                Message:
                                <textarea class="form-control" rows="5" id="firstMsg"></textarea>
                            </div>
                            <div class="col-md-12 text-center">
                                <button type="submit" class="btn btn-primary" id="newChatBtn">Create Chat</button>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

    </section>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>

        const userName = 'Current User';
        var button = document.getElementById("newChatBtn");

        //function to add a new Inbox row
        button.addEventListener("click", function (e) {
            var formContent = document.getElementById("messageForm");
            var inboxRows = document.getElementById('inboxRows');
            var entry = document.createElement('li');
            entry.className = "list-group-item list-group-item-action dropdown";
            //get information from the form
            var contact = formContent.elements[0].value;
            var tag = formContent.elements[1].value;
            var msg = formContent.elements[2].value;
            var date = (new Date()).toLocaleDateString();
            var time = formatAMPM(new Date());

            inboxRows.appendChild(entry);
            entry.innerHTML =
                '<div class="d-flex row pr-3"> \
                        <div class="col-9"> \
                            <h5 class="font-weight-bold">' + userName + '<span class="w3-tag w3-small w3-blue ml-3">' + tag + '</span></h5> \
                            <p>' + msg + '</p> \
                        </div> \
                        <div class="col-3 ml-auto pr-0 text-right"> \
                            <p class="mb-0">' + date + '</p> \
                            <p class="mb-0">' + time + '</p> \
                        </div> \
                    </div>';
            var modal = document.getElementById("composeMsg");
            $('#composeMsg').modal('hide');
            e.preventDefault();
        });

        //https://stackoverflow.com/questions/8888491/how-do-you-display-javascript-datetime-in-12-hour-am-pm-format
        function formatAMPM(date) {
            var hours = date.getHours();
            var minutes = date.getMinutes();
            var ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12; // the hour '0' should be '12'
            minutes = minutes < 10 ? '0' + minutes : minutes;
            var strTime = hours + ':' + minutes + ' ' + ampm;
            return strTime;
        }

    </script>
</body>

</html>