<!DOCTYPE html>
<html lang="en">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
     <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
     <link rel="stylesheet" href="css/main.css">
     <link rel="stylesheet" href="css/settings.css">

     <title>PlanIT</title>
     <link href='css/fullcalendar.css' rel='stylesheet' />
     <link href='css/fullcalendar.print.css' rel='stylesheet' media='print' />
     <script src='js/jquery-1.10.2.js' type="text/javascript"></script>
     <script src='js/jquery-ui.custom.min.js' type="text/javascript"></script>
     <script src='js/fullcalendar.js' type="text/javascript"></script>


     <!--Code for Calendar-->
     <script>
          $(document).ready(function () {
               var date = new Date();
               var d = date.getDate();
               var m = date.getMonth();
               var y = date.getFullYear();
			/*  className colors
			className: default(transparent), important(red), chill(pink), success(green), info(blue)
			*/
			/* initialize the external events
			-----------------------------------------------------------------*/
               $('#external-events div.external-event').each(function () {
                    // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
                    // it doesn't need to have a start or end
                    var eventObject = {
                         title: $.trim($(this).text()) // use the element's text as the event title
                    };
                    // store the Event Object in the DOM element so we can get to it later
                    $(this).data('eventObject', eventObject);
                    // make the event draggable using jQuery UI
                    $(this).draggable({
                         zIndex: 999,
                         revert: true,      // will cause the event to go back to its
                         revertDuration: 0  //  original position after the drag
                    });
               });
			/* initialize the calendar
			-----------------------------------------------------------------*/
               var calendar = $('#calendar').fullCalendar({
                    header: {
                         left: 'title',
                         center: 'agendaDay,agendaWeek,month',
                         right: 'prev,next today'
                    },
                    editable: true,
                    firstDay: 1, //  1(Monday) this can be changed to 0(Sunday) for the USA system
                    selectable: true,
                    defaultView: 'month',
                    axisFormat: 'h:mm',
                    columnFormat: {
                         month: 'ddd',    // Mon
                         week: 'ddd d', // Mon 7
                         day: 'dddd M/d',  // Monday 9/7
                         agendaDay: 'dddd d'
                    },
                    titleFormat: {
                         month: 'MMMM yyyy', // September 2009
                         week: "MMMM yyyy", // September 2009
                         day: 'MMMM yyyy'                  // Tuesday, Sep 8, 2009
                    },
                    allDaySlot: false,
                    selectHelper: true,
                    select: function (start, end, allDay) {
                         var title = prompt('Event Title:');
                         if (title) {
                              calendar.fullCalendar('renderEvent',
                                   {
                                        title: title,
                                        start: start,
                                        end: end,
                                        allDay: allDay
                                   },
                                   true // make the event "stick"
                              );
                         }
                         calendar.fullCalendar('unselect');
                    },
                    droppable: true, // this allows things to be dropped onto the calendar !!!
                    drop: function (date, allDay) { // this function is called when something is dropped
                         // retrieve the dropped element's stored Event Object
                         var originalEventObject = $(this).data('eventObject');
                         // we need to copy it, so that multiple events don't have a reference to the same object
                         var copiedEventObject = $.extend({}, originalEventObject);
                         // assign it the date that was reported
                         copiedEventObject.start = date;
                         copiedEventObject.allDay = allDay;
                         // render the event on the calendar
                         // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
                         $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);
                         // is the "remove after drop" checkbox checked?
                         if ($('#drop-remove').is(':checked')) {
                              // if so, remove the element from the "Draggable Events" list
                              $(this).remove();
                         }
                    },
                    events: [
                         {
                              title: 'All Day Event',
                              start: new Date(y, m, 1)
                         },
                         {
                              id: 999,
                              title: 'No Class',
                              start: new Date(y, m, d - 3, 16, 0),
                              allDay: false,
                              className: 'info'
                         },
                         {
                              id: 999,
                              title: 'No Class',
                              start: new Date(y, m, d + 4, 16, 0),
                              allDay: false,
                              className: 'info'
                         },
                         {
                              title: 'Meeting',
                              start: new Date(y, m, d, 10, 30),
                              allDay: false,
                              className: 'important'
                         },
                         {
                              title: 'Lunch',
                              start: new Date(y, m, d, 12, 0),
                              end: new Date(y, m, d, 14, 0),
                              allDay: false,
                              className: 'important'
                         },
                         {
                              title: 'Birthday Party',
                              start: new Date(y, m, d + 1, 19, 0),
                              end: new Date(y, m, d + 1, 22, 30),
                              allDay: false,
                         },
                         {
                              title: 'Finals',
                              start: new Date(y, m, 22),
                              end: new Date(y, m, 26),
                              className: 'important'
                         },
                         {
                              title: 'Graduation',
                              start: new Date(y, m, 29),
                              end: new Date(y, m, 29),
                              className: 'success'
                         }
                    ],
               });
          });
     </script>
     <style>
          body {
               text-align: center;
               font-size: 14px;
               font-family: "Helvetica Nueue", Arial, Verdana, sans-serif;
               background-color: #DDDDDD;
          }

          #wrap {
               width: 1100px;
               margin: 0 auto;
          }

          #external-events {
               float: left;
               width: 150px;
               padding: 0 10px;
               text-align: left;
          }

          #external-events h4 {
               font-size: 16px;
               margin-top: 0;
               padding-top: 1em;
          }

          .external-event {
               /* try to mimick the look of a real event */
               margin: 10px 0;
               padding: 2px 4px;
               background: #3366CC;
               color: #fff;
               font-size: .85em;
               cursor: pointer;
          }

          #external-events p {
               margin: 1.5em 0;
               font-size: 11px;
               color: #666;
          }

          #external-events p input {
               margin: 0;
               vertical-align: middle;
          }

          #calendar {
               /* 		float: right; */
               margin: 0 auto;
               width: 85%;
               background-color: #FFFFFF;
               border-radius: 6px;
               box-shadow: 0 1px 2px #C3C3C3;
          }
     </style>
     <!--Code for Calendar END-->

</head>

<body onload="funcToCallAtLoad()">
     <aside>

          <nav>
               <ul class="nav-bar">
                    <figure>
                         <img id="logo" src="images/logo2.png" alt="PlanitLogo">

                    </figure>

                    <li class="nav-button" onclick="changeTabContent(event, 'planner')">
                         <a href="#">
                              <div class="icon">
                                   <i class="ion-ios-paper" aria-hidden="true"></i>
                              </div>
                              <div class="name" data-text="Planner">Planner</div>
                         </a>
                    </li>
                    <li class="nav-button" onclick="changeTabContent(event, 'calendar')">
                         <a href="#">
                              <div class="icon activeIcon">
                                   <i class="ion-android-calendar" aria-hidden="true"></i>
                              </div>
                              <div class="name activeName" data-text="Calendar">Calendar</div>
                         </a>
                    </li>
                    <li class="nav-button" onclick="changeTabContent(event, 'messages')">
                         <a href="#">
                              <div class="icon">
                                   <i class="ion-chatboxes" aria-hidden="true"></i>
                              </div>
                              <div class="name" data-text="Messages">Messages</div>
                         </a>
                    </li>
                    <li class="nav-button" onclick="changeTabContent(event, 'settings')">
                         <a href="#">
                              <div class="icon">
                                   <i class="ion-ios-gear" aria-hidden="true"></i>
                              </div>
                              <div class="name" data-text="Settings">Settings</div>
                         </a>
                    </li>
               </ul>
          </nav>
     </aside>
     <main>

          </div>
          <div id="planner" class="app-content">
               <p>Planner content</p>
          </div>
          <div id="calendar" class="app-content">


          </div>

          <div id="messages" class="container app-content">

               <!--Tabs-->
               <div class="nav nav-tabs messages-tabs">
                    <button class="tab-button" onclick="changeMessagesContent(event, 'contactsTab')">Contacts</button>
                    <button class="tab-button activeBtn"
                         onclick="changeMessagesContent(event, 'inboxTab')">Inbox</button>
               </div>
               <!--Contacts Content-->
               <div id="contactsTab" class="nav-item messages-content">
                    <div class="container">
                         <div class="card">
                              <div class="card-header d-flex">
                                   <h5 class="mr-auto"></h5>
                                   <div class="dropdown align-self-center mr-3">
                                   </div>
                                   <button type="button" style="background-color:#002350; border-style:none"
                                        class="btn btn-sm btn-primary pt-0 pb-0" data-toggle="modal"
                                        data-target="#addContact">+ Add</button>


                                   <div class="modal fade" id="addContact" tabindex="-1" role="dialog"
                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                             <div class="modal-content">
                                                  <div class="modal-header">
                                                       <h5 class="modal-title">Add Contact</h5>
                                                       <button type="button" class="close" data-dismiss="modal"
                                                            aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                       </button>
                                                  </div>
                                                  <div class="modal-body">
                                                       <form id="contactForm">
                                                            <div class="form-group">
                                                                      <div style="float:left">Name:</div>
                                                                 <input type="text" class="form-control"
                                                                      name="personName" id="addName">
                                                            </div>
                                                            <div class="form-group">
                                                                      <div style="float:left">Phone:</div>
                                                                 <input type="text" class="form-control"
                                                                      name="personPhone" id="addPhone">
                                                            </div>
                                                            <div class="col-md-12 text-center">
                                                                 <button type="submit" class="btn btn-primary"
                                                                      id="addButton">Submit</button>
                                                            </div>
                                                       </form>
                                                  </div>
                                                  <div class="modal-footer">
                                                       <button type="button" class="btn btn-secondary"
                                                            data-dismiss="modal">Close</button>
                                                  </div>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                              <div class="mx-auto" id="emptyDefFill">
                                   <br />
                                   <h5>Click on +Add button to start adding contacts.</h5>
                                   <br />
                              </div>
                              <ul class="list-group list-group-flush messagesScrollable" id="peopleList">
                                   <!--Information is dynamically added here-->
                              </ul>
                         </div>
                    </div>
               </div>
               <!--Inbox Content-->
               <div id="inboxTab" class="nav-item messages-content">
                    <section class="container">
                         <div class="card">
                              <div class="card-header d-flex">
                                   <h5 class="mr-auto"></h5>
                                   <div class="dropdown align-self-center mr-3">
                                        <button class="btn btn-sm btn-secondary dropdown-toggle" type="button"
                                             id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                             aria-expanded="false">
                                             Filter
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                             <a class="dropdown-item" href="#">HCI</a>
                                             <a class="dropdown-item" href="#">COP 4338</a>
                                             <a class="dropdown-item" href="#">Unread</a>
                                        </div>
                                   </div>
                                   <button type="button" style="background-color:#002350; border-style:none"
                                        class="btn btn-sm btn-primary pt-0 pb-0" data-toggle="modal"
                                        data-target="#composeMsg">Compose</button>
                              </div>
                              <ul class="list-group list-group-flush messagesScrollable" id="inboxRows">
                                   <a class="list-group-item list-group-item-action">
                                        <div class="d-flex row pr-3">
                                             <div class="col-9 text-left">
                                                  <h5 class="font-weight-bold">Vanessa<span
                                                            class="w3-tag w3-small w3-green ml-3">HCI</span></h5>
                                                  <p>Vanessa: Hey how is your semester going?</p>
                                             </div>
                                             <div class="col-3 ml-auto pr-0 text-right">
                                                  <p class="mb-0">4/5/2019</p>
                                                  <p class="mb-0">5:47 PM</p>
                                                  <span
                                                       class="mt-4 badge badge-primary badge-pill align-self-e">2</span>
                                             </div>
                                        </div>
                                   </a>
                                   <a class="list-group-item list-group-item-action">
                                        <div class="d-flex row pr-3">
                                             <div class="col-9 text-left">
                                                  <h5 class="font-weight-bold">Rob<span
                                                            class="w3-tag w3-small w3-purple ml-3">COP 4338</span></h5>
                                                  <p>Rob: When is the homework due?</p>

                                             </div>
                                             <div class="col-3 ml-auto pr-0 text-right">
                                                  <p class="mb-0">4/5/2019</p>
                                                  <p class="mb-0">5:47 PM</p>
                                                  <span
                                                       class="mt-4 badge badge-primary badge-pill align-self-e">3</span>
                                             </div>
                                        </div>
                                   </a>
                                   <a class="list-group-item list-group-item-action">
                                        <div class="d-flex row pr-3">
                                             <div class="col-9 text-left">
                                                  <h5 class="font-weight-bold">Maria</h5>
                                                  <p>Maria: Have a good break!</p>
                                             </div>
                                             <div class="col-3 ml-auto pr-0 text-right">
                                                  <p class="mb-0">4/5/2019</p>
                                                  <p class="mb-0">5:47 PM</p>
                                                  <span
                                                       class="mt-4 badge badge-primary badge-pill align-self-e">1</span>
                                             </div>
                                        </div>
                                   </a>
                              </ul>
                         </div>

                         <!--To create a new message/chat-->
                         <div class="modal fade" id="composeMsg" tabindex="-1" role="dialog"
                              aria-labelledby="exampleModalLabel" aria-hidden="true">
                              <div class="modal-dialog" role="document">
                                   <div class="modal-content">
                                        <div class="modal-header">
                                             <h5 class="modal-title">Create a new chat</h5>
                                             <button type="button" class="close" data-dismiss="modal"
                                                  aria-label="Close">
                                                  <span aria-hidden="true">&times;</span>
                                             </button>
                                        </div>
                                        <div class="modal-body">
                                             <form id="messageForm">
                                                  <div class="form-group">
                                                       <div style="float:left">Contact:</div>
                                                       <input type="text" class="form-control" id="contactName">
                                                  </div>
                                                  <div class="form-group">
                                                       <div style="float:left">Course:</div>
                                                       <input type="text" class="form-control" id="courseName">
                                                  </div>
                                                  <div class="form-group">
                                                       <div style="float:left">Message:</div>
                                                       <textarea class="form-control" rows="5"></textarea>
                                                  </div>
                                                  <div class="col-md-12 text-center">
                                                       <button type="submit" class="btn btn-primary"
                                                            id="newChatBtn">Create Chat</button>
                                                  </div>
                                             </form>
                                        </div>
                                        <div class="modal-footer">
                                             <button type="button" class="btn btn-secondary"
                                                  data-dismiss="modal">Close</button>
                                        </div>
                                   </div>
                              </div>
                         </div>

                    </section>

               </div>
               <!--Content for message page-->
               <div id="message" class="messages-content text-left">
                    <section class="container ">
                         <a onclick="changeTabContent(event,'messages')" class="back mb-4">&laquo; Back</a>
                         <div class="card chat-box d-flex" style=" background-color: whitesmoke;">
                              <div class="card-header" style="background-color: #002350">
                                   <h5 style="color: white" id="contactHeader">Contact <span class="dot"></span></h5>
                              </div>
                              <div class="mt-auto p-3">
                                   <ul class="pl-0 scroll" id="messageList">
                                        <li class="list-group-item msg-bubble" id="firstMsg">
                                             <h6 style="color:#002350" id="contactBubble"><b>Contact</b></h6>
                                             <p id="contactText">How is your semester going?</p>
                                        </li>
                                   </ul>
                                   <div class="input-group mb-3 ">
                                        <input type="text" class="form-control" id="msgtext" placeholder="Type Message"
                                             aria-label="type message" aria-describedby="basic-addon2">
                                        <div class="input-group-append">
                                             <button class="btn btn-secondary" style="background-color:#002350"
                                                  type="button" id="sendBtn">Send</button>
                                        </div>
                                   </div>
                              </div>
                         </div>
                    </section>
               </div>

          </div>
          <div id="settings" class="app-content">
               <div class="settingsScrollable">
                    <h1 class = "settings-cont">Settings</h1><br>

                    <img class="prof-pic" src="images/face.jpg" alt=""><br>

                    <div class="personal-info">

                         <p class="name-settings">Name: <span contenteditable="true" class="input-settings"> Jane </span></p>
                         <p class="name-settings">Last Name: <span contenteditable="true" class="input-settings"> Doe </span></p>
                         <p class="name-settings">e-Mail: <span contenteditable="true" class="input-settings"> jadoe001@fiu.edu </span></p>
                         <p class="name-settings">Panther ID: <span contenteditable="true" class="input-settings"> 1533350 </span></p>
                         <p class="name-settings">Phone Number: <span contenteditable="true" class="input-settings"> 786-555-4545 </span></p>

                    </div>
                    <div class="gender">
                              <p class="header-gender">Gender</p>
                              <form action="#">
                                   <p>
                                     <input type="radio" id="test1" name="radio-group" checked>
                                     <label for="test1">Female</label>
                                   </p>
                                   <p>
                                     <input type="radio" id="test2" name="radio-group">
                                     <label for="test2">Male</label>
                                   </p>
                                   <p>
                                     <input type="radio" id="test3" name="radio-group">
                                     <label for="test3">Other</label>
                                   </p>
                              </form>

                    </div>
                    <div class = "gender">
                         <p class="header-gender">Privacy </p>
                         <label class="container-priv">Make Phone Number visible to classmates
                              <input type="checkbox" checked="checked">
                              <span class="checkmark"></span>
                         </label>

                         <label class="container-priv">Make e-Mail visible to classmates
                              <input type="checkbox" checked="checked">
                              <span class="checkmark"></span>
                         </label>
                    </div>

                    <div class = "gender">
                         <p class="header-gender">Notifications </p>
                         <label class="container-priv">Allow notifications from classmates
                              <input type="checkbox" checked="checked">
                              <span class="checkmark"></span>
                         </label>

                         <label class="container-priv">Allow notifications from Professors
                              <input type="checkbox" checked="checked">
                              <span class="checkmark"></span>
                         </label>
                         <label class="container-priv">Allow daily report
                              <input type="checkbox">
                              <span class="checkmark"></span>
                         </label>
                    </div>

                    <button class="save">Save Settings</button>
               </div>
          </div>

     </main>
     <!--JS for navigation tab switching the navigation the menu>-->
     <script>
          function funcToCallAtLoad() {
               calendarActiveOnLoad();
               inboxActiveOnLoad();
          }
          function changeToActiveTag(evt) {
          }
          /*Sets the Calendar tab active and displays its content on load*/
          function calendarActiveOnLoad() {
               var i, appContent, navButton;
               appContent = document.getElementsByClassName("app-content");
               for (i = 0; i < appContent.length; i++) {
                    appContent[i].style.display = "none";
               }
               document.getElementById('calendar').style.display = "block";
               //evt.currentTarget.className += " active";
          }
          /*Switches between page content depending on the button selected.
          https://www.w3schools.com/howto/tryit.asp?filename=tryhow_js_tabs*/
          function changeTabContent(evt, navButtonName) {
               var i, appContent, navButton;
               appContent = document.getElementsByClassName("app-content");
               navButton = document.getElementsByClassName("nav-button");
               for (i = 0; i < appContent.length; i++) {
                    appContent[i].style.display = "none";
               }

               document.getElementById(navButtonName).style.display = "block";

               var main = document.getElementsByTagName("main")[0].style.padding = "4em";
               if (navButtonName === "messages") {
                    $(".messages-tabs").show();
                    document.getElementById('inboxTab').style.display = "block";
               }
               document.getElementById("message").style.display = "none";

          }
          /*Sets the  tab active and displays its content on load*/
          function inboxActiveOnLoad() {
               var i, messagesContent, messagesButton;
               messagesContent = document.getElementsByClassName("messages-content");
               for (i = 0; i < messagesContent.length; i++) {
                    messagesContent[i].style.display = "none";
               }
               document.getElementById('inboxTab').style.display = "block";
          }
          /*Switches between messages content depending on the button selected.*/
          function changeMessagesContent(evt, tabName) {
               var i, messagesContent, messagesButton;
               messagesContent = document.getElementsByClassName("messages-content");
               messagesButton = document.getElementsByClassName("tab-button");
               for (i = 0; i < messagesContent.length; i++) {
                    messagesContent[i].style.display = "none";
               }
               document.getElementById(tabName).style.display = "block";
               $(".messages-tabs button").removeClass("activeBtn");
               evt.currentTarget.className += " activeBtn";
          }


          //change active for nav bar
          $(".nav-button").click(function () {
               $("nav ul li a .icon").removeClass("activeIcon");
               $(this).find(".icon").addClass("activeIcon");
               $("nav ul li a .name").removeClass("activeName");
               $(this).find(".name").addClass("activeName");
          });
     </script>
     <!--JS for adding a contact to the contact list in messages>-->
     <script>
         class ContactList {
            constructor (numOfContacts, contactList){
               this.numOfContacts = numOfContacts;
               this.contactList = contactList;
            }
            /*Push name and phone number to contactList array*/
            addToContacts(name, phone){
              this.numOfContacts += 1;
              var tempArr = [];
              tempArr.push(name);
              tempArr.push(phone);
              this.contactList.push(tempArr);
            }
            /*Shorthand to get contact array length*/
            get length() {
              return this.contactList.length;
            }
            /*Sort array by first column of the array.*/
            sortByName() {
               this.contactList.sort(sortFunc);
            }
            /*Auxilary func to sort 2d array*/
            sortFunc(a, b) {
              if (a[0] === b[0]) {
                  return 0;
              }
              else {
                  return (a[0] < b[0]) ? -1 : 1;
              }
            }
         }
         const contacts = new ContactList(0, []);
         /*Event listener for adding to the contact list*/
         addButton.addEventListener("click", function(e) {
             var formContent = document.getElementById("contactForm");
             var personList = document.getElementById('peopleList');
             var list = personList.getElementsByTagName('li');
             var entry = document.createElement('li');
             entry.className = "list-group-item list-group-item-action personContact dropdown text-left";
             var name = document.createTextNode(formContent.elements[0].value);
             contacts.addToContacts(formContent.elements[0].value, formContent.elements[1].value);
             var personName = document.getElementById('addName').value;
             personName = personName.charAt(0).toUpperCase() + personName.substring(1).toLowerCase();
             var i= 0;
             var currVal = list[0];
             entry.appendChild(document.createTextNode(personName));
             while(currVal && currVal.innerHTML<personName)
                  currVal= list[++i];
             if (currVal)
                  personList.insertBefore(entry, currVal);
             else
                  personList.appendChild(entry);
             if (contacts.length > 0){
                 var defaultFill = document.getElementById('emptyDefFill');
                 defaultFill.style.display = 'none';
             }
             var personContact = document.getElementById('addPhone').value;
             console.log(personContact);
             var buttonsString =
                 "<div class=\"dropdown text-right\">" +
                      "<button type=\"button\" class=\"btn btn-sm btn-secondary dropdown-toggle\" id=\"sendMessageDropDown\"" +
                           " data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"> Actions </button>" +
                      "<div class=\"dropdown-menu\" aria-labelledby=\"sendMessageDropDown\">" +
                           "<a class=\"dropdown-item\" href=\"#\">Compose</a>" +
                           "<a class=\"dropdown-item\" href=\"#\">Add to group</a>" +
                           "<a class=\"dropdown-item\" data-toggle=\"tooltip\" data-trigger=\"hover\" title=\"Phone Number:\n\n" + personContact + "\" href=\"#\">View Number</a>" +
                      "</div>" +
                 "<button type=\"button\" style=\"background-color:#002350; border-style:none; margin-left:10px;\" class=\"btn btn-sm btn-primary delButton\" id=\"#delContact\"> - </button>" +
                 "</div>";
             entry.innerHTML += buttonsString;
             e.preventDefault();
         });
         /*Event listener for deleting a contact from the list using the "-"
           button*/
         /*TODO:Delete corresponding information from array*/
         $(document).ready(function () {
               $(document).on('click','.delButton', function () {
              console.log('delete');
              $(this).closest("li").remove();
               });
          });
     </script>
     <!--JS for inbox tab of messages-->
     <script>
          var button = document.getElementById("newChatBtn");
          //function to add a new Inbox row
          button.addEventListener("click", function (e) {
               var formContent = document.getElementById("messageForm");
               var inboxRows = document.getElementById('inboxRows');
               var entry = document.createElement('a');
               entry.className = "list-group-item list-group-item-action newRow";
               //get information from the form
               var contact = formContent.elements[0].value;
               var tag = formContent.elements[1].value.toUpperCase();
               var msg = formContent.elements[2].value;
               var date = (new Date()).toLocaleDateString();
               var time = formatAMPM(new Date());
               inboxRows.appendChild(entry);
               entry.innerHTML =
                    '<div class="d-flex row pr-3"> \
                         <div class="col-9 text-left"> \
                             <h5 class="font-weight-bold">' + contact + '<span class="w3-tag w3-small w3-blue ml-3">' + tag + '</span></h5> \
                             <p>' + "You: " + msg + '</p> \
                         </div> \
                         <div class="col-3 ml-auto pr-0 text-right"> \
                             <p class="mb-0">' + date + '</p> \
                             <p class="mb-0">' + time + '</p> \
                         </div> \
                     </div>';
               var modal = document.getElementById("composeMsg");
               $('#composeMsg').modal('hide');
          });
          //https://stackoverflow.com/questions/8888491/how-do-you-display-javascript-datetime-in-12-hour-am-pm-format
          function formatAMPM(date) {
               var hours = date.getHours();
               var minutes = date.getMinutes();
               var ampm = hours >= 12 ? 'PM' : 'AM';
               hours = hours % 12;
               hours = hours ? hours : 12; // the hour '0' should be '12'
               minutes = minutes < 10 ? '0' + minutes : minutes;
               var strTime = hours + ':' + minutes + ' ' + ampm;
               return strTime;
          }

          //click on inbox row shows message box
          $("#inboxRows").on("click", "a", function () {
               var text = $(this).find(".col-9 h5").text();
               var tag = $(this).find(".col-9 h5 span").text();
               var description = $(this).find(".col-9 p").text();
     
               //get name of contact and desription
               var name = text.replace(tag, "");
               description = description.replace(name + ": ", "");

               var i, messagesContent;
               messagesContent = document.getElementsByClassName("messages-content");
               for (i = 0; i < messagesContent.length; i++) {
                    messagesContent[i].style.display = "none";
               }
               document.getElementsByClassName("messages-tabs")[0].style.display = "none";
               document.getElementById('message').style.display = "block";
               document.getElementsByTagName("main")[0].style.padding = "0";
               //reset first message styling
               document.getElementById("contactHeader").innerHTML = name + '<span class="dot"></span>';
               document.getElementById("firstMsg").innerHTML = '<h6 style="color:#002350" id="contactBubble"><b>Contact</b></h6>\
                                             <p id="contactText">How is your semester going?</p>';
               $("#firstMsg").removeClass("mt-3 ml-auto text-right");

               //set name in message box
               if ($(this).hasClass("newRow")) {
                    console.log("in if")
                    description = description.replace("You: ","");
                    document.getElementById("firstMsg").innerHTML = '<h6 style="color:#ECAD36" id="contactBubble"><b>You</b></h6>\
                                            <p id="contactText">' + description + '</p>';
                    $("#firstMsg").addClass("mt-3 ml-auto text-right");
               }
               else {
                    document.getElementById("contactBubble").innerHTML = '<b>' + name + '</b>';
                    document.getElementById("contactText").innerHTML = description;
               }

               $(".newMsg").remove();

          });



     </script>
     <!--Script for individual message box-->
     <script>



          //auto scroll to bottom of messages
          var list = document.getElementById("messageList");
          list.scrollTop = list.scrollHeight;

          function updateScroll() {
               var list = document.getElementById("messageList");
               list.scrollTop = list.scrollHeight;
          }

          var sendBtn = document.getElementById("sendBtn");
          var input = document.getElementById("msgtext");


          sendBtn.addEventListener("click", sendMsg);
          input.addEventListener("keydown", function (e) {
               //pressed enter
               if (e.keyCode === 13) {
                    sendMsg();
               }
          });

          //function to send a new msg
          function sendMsg(e) {
               var list = document.getElementById("messageList");
               var msg = document.getElementById('msgtext').value;
               var entry = document.createElement('li');
               entry.className = "list-group-item msg-bubble mt-3 ml-auto text-right newMsg";

               list.appendChild(entry);
               entry.innerHTML =
                    '<h6 style="color:#ECAD36"><b>You</b></h6> \
                       <p>' + msg + '</p>';

               updateScroll();
               input.value = "";
          }

     </script>

     <!--<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
         integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
         crossorigin="anonymous"></script>-->
     <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
          integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
          crossorigin="anonymous"></script>
     <script src="../js/bootstrap.bundle.min.js"></script>
     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
          integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
          crossorigin="anonymous"></script>
     <script src="../js/bootstrap.min.js"></script>


</body>

</html>
